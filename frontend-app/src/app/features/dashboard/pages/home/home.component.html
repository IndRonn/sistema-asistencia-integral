<div class="min-h-screen bg-sys-black flex flex-col items-center justify-center relative animate-fade-in text-center p-4">

  <div class="absolute top-0 left-0 w-full p-6 flex justify-between items-start z-10">

    <div class="text-left">
      <h2 class="text-sys-silver text-xs uppercase tracking-[0.2em]">Bienvenido, Agente</h2>
      <p class="text-white font-serif text-lg font-bold">{{ authService.currentUser()?.nombres }}</p>
    </div>

    <div class="flex flex-col items-end gap-3">

      <a *ngIf="authService.currentRole() === 'ADMIN'"
         routerLink="/admin/overview"
         class="text-sys-primary text-xs uppercase font-bold tracking-widest border border-sys-primary px-4 py-2 hover:bg-sys-primary hover:text-black transition-all cursor-pointer flex items-center gap-2">
        <span>âš™ï¸ Volver al Panel</span>
      </a>

      <a routerLink="historial"
         class="text-sys-silver text-xs uppercase font-bold tracking-widest border border-sys-dim px-4 py-2 hover:bg-white/10 transition-all cursor-pointer flex items-center gap-2">
        <span>ğŸ“… Ver Historial</span>
      </a>

      <button (click)="logout()" class="text-sys-alert text-[10px] uppercase tracking-widest hover:underline mt-1">
        Cerrar SesiÃ³n
      </button>
    </div>
  </div>

  <div class="z-0 flex flex-col items-center gap-8">

    <div class="space-y-2">
      <div class="text-7xl md:text-9xl font-mono text-white font-bold tracking-tighter drop-shadow-[0_0_15px_rgba(255,255,255,0.1)]">
        {{ currentTime() }}
      </div>
      <div class="text-sys-primary text-sm md:text-xl font-mono uppercase tracking-[0.3em] border-t border-sys-dim/30 pt-4">
        {{ currentDate() | date : "EEEE, d 'de' MMMM" : '' : 'es-ES' }}
      </div>
    </div>

    <button
      (click)="onMarcar()"
      [disabled]="uiState().disabled || isProcessingMarca()"
      class="w-64 h-64 rounded-full border-4 flex flex-col items-center justify-center transition-all duration-500 hover:scale-105 active:scale-95 group relative bg-black"
      [ngClass]="uiState().color">

      <div class="absolute inset-0 rounded-full opacity-0 group-hover:opacity-10 transition-opacity bg-current blur-xl"></div>

      <span class="text-4xl mb-2 transition-transform duration-500 group-hover:-translate-y-1">
        {{ uiState().disabled ? 'ğŸ”’' : 'ğŸ‘†' }}
      </span>

      <span class="text-sm font-bold tracking-[0.2em] animate-pulse" *ngIf="isProcessingMarca()">
        PROCESANDO...
      </span>

      <span class="text-sm font-bold tracking-[0.2em]" *ngIf="!isProcessingMarca()">
        {{ uiState().actionLabel }}
      </span>

      <div class="mt-4 text-[10px] text-gray-500 uppercase tracking-widest absolute bottom-10">
        {{ uiState().label }}
      </div>
    </button>

    <div class="h-8">
      <div *ngIf="statusData()?.horaEntrada" class="text-xs text-sys-silver font-mono animate-fade-in">
        ENTRADA REGISTRADA: <span class="text-white">{{ statusData()?.horaEntrada }}</span>
        <span *ngIf="statusData()?.esTardanza" class="text-sys-warning ml-2">(TARDANZA)</span>
      </div>
      <div *ngIf="statusData()?.horaSalida" class="text-xs text-sys-silver font-mono animate-fade-in mt-1">
        SALIDA REGISTRADA: <span class="text-white">{{ statusData()?.horaSalida }}</span>
      </div>
    </div>

  </div>
</div>
